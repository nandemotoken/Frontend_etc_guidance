<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第4回:俺たちはサーバとクラウドに支えられている</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            overflow: hidden;
        }
        .slide-container {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        .slide {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            padding: 2vh 4vw;
            box-sizing: border-box;
            transform: translateX(100%);
            transition: transform 0.5s ease;
            overflow-y: auto;
            background-color: white;
        }
        .slide.active {
            transform: translateX(0);
        }
        .slide.prev {
            transform: translateX(-100%);
        }
        h1 {
            font-size: min(4vh, 28px);
            border-bottom: 2px solid #6a0dad;
            padding-bottom: 1vh;
            margin-top: 2vh;
            color: #6a0dad;
        }
        h2 {
            font-size: min(3.5vh, 24px);
            border-left: 5px solid #6a0dad;
            padding-left: 2vw;
            margin-top: 3vh;
        }
        .chapter {
            max-width: 92vw;
            margin: 0 auto;
            padding: 2vh 2vw;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .divider {
            border-top: 1px dashed #ccc;
            margin: 20px 0;
        }
        .highlight {
            background-color: #f3e8ff;
            padding: 15px;
            border-left: 4px solid #6a0dad;
            margin: 15px 0;
        }
        .dialogue .name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #6a0dad;
        }
        .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 14px;
            color: #777;
        }
        .teaching {
            background-color: #f3e8ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .nav-buttons {
            position: fixed;
            bottom: 2vh;
            right: 2vw;
            z-index: 100;
        }
        .nav-buttons button {
            background-color: #6a0dad;
            color: white;
            border: none;
            padding: 1vh 2vw;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 1vw;
            font-size: min(2.5vh, 16px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s;
        }
        .nav-buttons button:hover {
            background-color: #520a86;
        }
        .nav-buttons button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .slide-number {
            position: fixed;
            bottom: 2vh;
            left: 2vw;
            font-size: min(2.5vh, 14px);
            color: #777;
            z-index: 100;
        }
        .fullscreen-icon {
            position: fixed;
            top: 2vh;
            right: 2vw;
            font-size: min(4vh, 24px);
            color: #6a0dad;
            cursor: pointer;
            z-index: 100;
        }
        .title-slide {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            padding: 0 4vw;
        }
        .title-slide h1 {
            font-size: min(6vh, 36px);
            margin-bottom: 2vh;
            border-bottom: none;
        }
        .title-slide p {
            font-size: min(3vh, 20px);
            color: #666;
        }
        .chapter-title {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 90%;
        }
        .chapter-title h1 {
            font-size: 32px;
            border-bottom: none;
        }
        p {
            font-size: min(2.8vh, 16px);
            line-height: 1.6;
        }
        .code-block {
            background-color: #2d2d2d;
            color: #f8f8f2;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="slide-container">
        <!-- タイトルスライド -->
        <div class="slide active" id="slide-1">
            <div class="title-slide">
                <h1>第4回:俺たちはサーバとクラウドに支えられている</h1>
                <p>― ベゾス復活編 ―</p>
            </div>
        </div>

        <!-- 登場人物紹介 -->
        <div class="slide" id="slide-2">
            <div class="chapter">
                <h1>登場人物紹介</h1>
                <div class="divider"></div>
                <h2>俺</h2>
                <p>主人公。数々の死線を乗り越え、安定運用の重要性に目覚め始めたエンジニア。</p>
                <h2>弟子</h2>
                <p>質問・ツッコミ役。師匠の奇行を見守りつつ、的確な指摘を入れるしっかり者。</p>
                <h2>ベゾス</h2>
                <p>雲から蘇ったクラウドの申し子。AWSの創始者であり、物理法則より請求書を重んじる。</p>
            </div>
        </div>

        <!-- 幕一：サーバの基本 -->
        <div class="slide" id="slide-3">
            <div class="chapter-title">
                <h1>幕一</h1>
                <h2>サーバの基本<br>“止めない”ことの原理</h2>
            </div>
        </div>
        
        <!-- Scene 1: プロローグ -->
        <div class="slide" id="slide-4">
            <div class="chapter">
                <h1>プロローグ：安定運用への目覚め</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺（モノローグ）</div>
                    <p>俺にも弟子ができていた。未熟な俺だが、それでも任せられる背中になりたい。</p>
                    <p>ある夜、静まり返ったサーバ室で赤いアラートが点滅するのを見て、悟ったのだ。</p>
                    <p>“止めない”のは根性ではない。<strong>設計と訓練</strong>だ、と。</p>
                </div>
            </div>
        </div>

        <!-- Scene 1：UPSバトル -->
        <div class="slide" id="slide-5">
            <div class="chapter">
                <h1>Scene 1: UPSバトル — 電源は“武器”ではなく“土台”</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「うおおッ！ 俺の最終兵器、UPSバスターーー！」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「師匠ストップ！ UPSは武器じゃない、無停電電源装置です！ まずその辺に置きましょう！」</p>
                </div>
                 <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「そうか……“止めない”とは、まず土台を固めること。要点は3つ。(1)二重化、(2)系統分離、(3)手順の訓練だ。」</p>
                </div>
            </div>
        </div>
        
        <!-- UPS技術解説1 -->
        <div class="slide" id="slide-6">
            <div class="chapter">
                <h1>技術解説：電源冗長化の基本</h1>
                <div class="divider"></div>
                <h2>デュアルPSU (電源ユニット)</h2>
                <p>サーバに2つの電源ユニットを搭載し、それぞれを別の電源系統に接続する。</p>
                
                <h2>別系統PDU (電源タップ)</h2>
                <p>2つのPDUを用意し、それぞれを異なる分電盤やUPSに繋ぐ。これにより、片方の系統が落ちてもサーバは稼働を続ける。</p>
                <div class="code-block">
                # 理想的な接続
                サーバPSU1 -> PDU-A -> UPS-A -> 商用電源A
                サーバPSU2 -> PDU-B -> UPS-B -> 商用電源B
                </div>
            </div>
        </div>
        
        <!-- UPS技術解説2 -->
        <div class="slide" id="slide-7">
            <div class="chapter">
                <h1>技術解説：UPSの役割と訓練</h1>
                <div class="divider"></div>
                <h2>UPS方式と切替時間</h2>
                <p>瞬断も許されないシステムでは、常時インバータ方式（オンラインUPS）を選択する。停電時にバッテリーへの切り替え時間がゼロになる。</p>
                
                <h2>疑似停電訓練</h2>
                <p>Runbook（手順書）を用意し、実際にUPSの電源を抜いてフェイルオーバーが機能するかを定期的にテストする。<strong>訓練していない手順は、存在しないのと同じだ。</strong></p>
            </div>
        </div>
        
        <!-- 受講者ワーク1 -->
        <div class="slide" id="slide-8">
            <div class="chapter">
                <h1>受講者ワーク (45秒)</h1>
                <div class="divider"></div>
                <h2>あなたの現場の「単一障害点」は？</h2>
                <p>システム全体で、もし「ここが壊れたら全部止まる」という箇所を1つだけ挙げてください。</p>
                <div class="teaching">
                    <p><strong>例：</strong></p>
                    <ul>
                        <li>壁の電源コンセントが1系統しかない</li>
                        <li>ロードバランサーが1台構成</li>
                        <li>DNSサーバが内外に1台ずつしかない</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Scene 2：RAIDピザ -->
        <div class="slide" id="slide-9">
            <div class="chapter">
                <h1>Scene 2: RAIDピザ — “壊れても止めないため”</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「HDDの故障にも備えねば。RAIDだ。これはピザによく似ている。」</p>
                </div>
                <ul>
                    <li><strong>RAID 0 (ストライピング)</strong>＝半分同時食い。速いが、1枚でも腐ると全部食べられない。</li>
                    <li><strong>RAID 1 (ミラーリング)</strong>＝同じピザが2枚。安心だが、コストは2倍。</li>
                    <li><strong>RAID 5 (分散パリティ)</strong>＝具を分散配置し、1枚腐っても味を再現できるチーズ（パリティ）を載せる。</li>
                </ul>
            </div>
        </div>

        <!-- RAID技術解説 -->
        <div class="slide" id="slide-10">
            <div class="chapter">
                <h1>技術解説：RAIDはバックアップではない</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「現場ではRAID 6（パリティ2重化）やRAID 10（ミラーのストライピング）が現実的な落としどころだ。だが、忘れてはならないスローガンがある。」</p>
                    <p style="text-align:center; font-size: 1.5em; font-weight: bold;"><strong>“RAID ≠ バックアップ”</strong></p>
                    <p>「人為的なファイル削除、ランサムウェアによる暗号化、論理破損はRAIDでは防げない。それには世代管理バックアップとオフサイト保管が必要だ。」</p>
                </div>
                <div class="teaching">
                    <p><strong>RAIDは「保険」、バックアップは「タイムマシン」</strong></p>
                </div>
            </div>
        </div>
        
        <!-- 幕二：クラウドの衝撃へ -->
        <div class="slide" id="slide-11">
            <div class="chapter">
                <h1>物理サーバの限界</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「電源とRAIDで“止めない”土台はできた。…だが、急なアクセス増（スパイク）に瞬時に追随したい時、物理サーバの調達時間や設置場所の限界は避けられない。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「<strong>“必要な時に、必要なだけ”</strong>リソースを借りられたら、急なスパイクにも耐えられますね。」</p>
                </div>
                 <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「うむ。世界が滅びる前は…クラウドという便利なものもあったのだがな…」</p>
                </div>
            </div>
        </div>
        
        <!-- 幕二：クラウドの衝撃 -->
        <div class="slide" id="slide-12">
            <div class="chapter-title">
                <h1>幕二</h1>
                <h2>クラウドの衝撃</h2>
            </div>
        </div>

        <!-- Scene 3：雲のカプセル復活劇 -->
        <div class="slide" id="slide-13">
            <div class="chapter">
                <h1>Scene 3: 雲のカプセル復活劇</h1>
                <div class="divider"></div>
                <p style="text-align: center; font-size: 2em; color: #6a0dad;">ゴゴゴゴゴ…！</p>
                <p>空に浮かぶ雲が渦を巻き、カプセルのようなものから人影が現れる。</p>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「This is not magic. This is AWS.」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「なっ…雲から人が！？まさか、Amazon Web Servicesの創始者、ジェフ・ベゾスなのか…！？」</p>
                </div>
                 <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「いかにも。私の資産力をもってすれば、核シェルターの一つや二つ、容易いものさ。」</p>
                </div>
            </div>
        </div>
        
        <!-- クラウドとは何か -->
        <div class="slide" id="slide-14">
            <div class="chapter">
                <h1>技術解説：クラウドの5大要素</h1>
                <div class="divider"></div>
                 <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「クラウドとは、巨大なデータセンター群を仮想化技術で分割し、API経由でオンデマンドに貸し出し、従量課金で精算するサービス…ですよね？」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「その通り。クラウドの基本は5つの要素に集約される。」</p>
                </div>
                <ul>
                    <li><strong>仮想化とリソースプール</strong>: 物理リソースを論理的に分割し、巨大なプールとして管理。</li>
                    <li><strong>セルフサービス</strong>: ユーザーが管理画面やAPIから直接リソースを操作できる。</li>
                    <li><strong>弾力性 (Elasticity)</strong>: 負荷に応じてリソースを秒～分単位で自動的に増減できる。</li>
                    <li><strong>従量課金</strong>: 使った分だけ（時間、容量、転送量）支払うモデル。</li>
                </ul>
            </div>
        </div>
        
        <!-- IaaS, PaaS, SaaS -->
        <div class="slide" id="slide-15">
            <div class="chapter">
                <h1>技術解説：IaaS, PaaS, SaaS</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「我こそがAWS。すなわちIaaS (Infrastructure as a Service)なり。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「IaaS…他にもPaaSとかSaaSとかありましたね。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「管理する責任範囲で分かれているんだ。<br>
                    <strong>IaaS</strong>：インフラ層（VM, ストレージ, NW）。最も自由度が高いが、運用負担も大きい。<br>
                    <strong>PaaS</strong>：プラットフォーム層（アプリ実行基盤, DB）。OSやミドルウェアの管理を任せられる。<br>
                    <strong>SaaS</strong>：ソフトウェア層（完成品）。Gmailのように、ただ利用するだけ。」</p>
                </div>
            </div>
        </div>
        
        <!-- SLAと責任分界点 -->
        <div class="slide" id="slide-16">
            <div class="chapter">
                <h1>技術解説：SLAと責任分界点</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「私の秘蔵サービス、S3の可用性は年間99.99%。『9』が増えるほど停止許容量は指数関数的に減る。99.99%は年50分程度の停止だ。つまり私は年に50分しか眠れぬ。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「ブラックすぎる！」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「SLAは無停止保証ではない。クラウド事業者の責任範囲と、我々利用者の責任範囲（責任分界点）を理解し、アプリ側でリトライやフェイルオーバーを実装するのは利用者の責務だ。」</p>
                </div>
            </div>
        </div>

        <!-- コスト管理 -->
        <div class="slide" id="slide-17">
            <div class="chapter">
                <h1>技術解説：クラウドのコスト管理</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「そして忘れるな──“オンプレではサーバ調達に1週間、クラウドなら1クリック。だが請求は1秒単位で来る。”」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「だからこそ、タグ運用でプロジェクトや環境を紐づけ、予算アラートや権限設定（ガードレール）で想定外の課金を防ぐ仕組みが重要なんだ。」</p>
                </div>
                 <div class="teaching">
                    <h2>クラウドコストの3要素</h2>
                    <p>Compute (計算資源), Storage (データ保管), Egress (データ転送量、特にインターネットへの送信)</p>
                </div>
            </div>
        </div>

        <!-- 受講者ワーク2 -->
        <div class="slide" id="slide-18">
            <div class="chapter">
                <h1>受講者ワーク (30秒)</h1>
                <div class="divider"></div>
                <h2>あなたのサービスはどれ？</h2>
                <p>現在関わっているサービスで、IaaS, PaaS, SaaS のどれを主に利用していますか？</p>
                <div class="teaching">
                    <p><strong>例：</strong></p>
                    <ul>
                        <li>EC2上でDBも自分たちで運用 → <strong>IaaS</strong></li>
                        <li>HerokuやRender.comにデプロイしている → <strong>PaaS</strong></li>
                        <li>SalesforceやGoogle Workspaceが業務の中心 → <strong>SaaS</strong></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Scene 4：PaaSへ -->
        <div class="slide" id="slide-19">
            <div class="chapter">
                <h1>Scene 4: PaaSの甘美と対価</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「階層と責任は理解しました。では、一番楽にクラウドの恩恵を受ける道は？」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「PaaSだ。コードを`git push`したら、ビルドからデプロイまで面倒を見てくれる世界だ。例えばRender.comとかな。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「便利だろう？ だが抽象化には制約が伴う。ビルド方式、起動モデル、ログ保持期間──仕様をよく読むのだ。そして…愚か者よ、そのPaaSの裏側もAWSで動いているのだ！！！」</p>
                </div>
            </div>
        </div>
        
        <!-- PaaSの技術解説 -->
        <div class="slide" id="slide-20">
            <div class="chapter">
                <h1>技術解説：PaaSのトレードオフ</h1>
                <div class="divider"></div>
                 <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「VercelやNetlifyのようなフロントエンド特化のPaaSもありますね。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「そうだ。“自分でやらない代わりに、プラットフォームの流儀に従う”。これがPaaSの本質だ。この制約を受け入れることで、我々は圧倒的な開発速度と再現性を手に入れることができる。」</p>
                </div>
                 <div class="teaching">
                    <h2>PaaS利用時の注意点</h2>
                    <ul>
                        <li><strong>コールドスタート</strong>: 長時間アクセスがないとスリープし、初回アクセスが遅くなることがある。</li>
                        <li><strong>制約の確認</strong>: 同時接続数、ログの保管期間、利用できるミドルウェアのバージョンなど。</li>
                        <li><strong>Runbookの整備</strong>: デプロイ手順や、問題発生時のロールバック手順は必ず文書化しておく。</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- 幕三：スケールの壁とNoSQLへ -->
        <div class="slide" id="slide-21">
            <div class="chapter">
                <h1>PaaSのその先へ</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「デプロイは超ラクになりました。でも、ユーザーが増える波に、だんだんデータベースが応答を返さなくなってきました…。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「ついにその壁にぶつかったか。ならば、次はデータの“問い方”そのものを変える。NoSQLの世界へ行くぞ。」</p>
                </div>
            </div>
        </div>

        <!-- 幕三：スケールの壁とNoSQL -->
        <div class="slide" id="slide-22">
            <div class="chapter-title">
                <h1>幕三</h1>
                <h2>スケールの壁とNoSQL</h2>
            </div>
        </div>

        <!-- Scene 5：NoSQL導入の必然 -->
        <div class="slide" id="slide-23">
            <div class="chapter">
                <h1>Scene 5: NoSQL導入の必然</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「Render.comのDBで処理をさばいていたが、ユーザーが増えるにつれ処理が遅延し始めた。JOINの多重連鎖、行ロックの競合、スパイク時の水平スケールの壁……」</p>
                    <p>「<strong>“読める速さ”</strong>と<strong>“書ける速さ”</strong>を、もう一段階上げる必要がある。」</p>
                    <p>「そうだ、NoSQL。発想を逆転させるんだ。<strong>“最初から読まれる形で保存する”</strong>と。」</p>
                </div>
            </div>
        </div>
        
        <!-- RDBのボトルネック解説 -->
        <div class="slide" id="slide-24">
            <div class="chapter">
                <h1>技術解説：RDBがスケールしにくい理由</h1>
                <div class="divider"></div>
                <p>RDBはデータの整合性を保つ機能（トランザクション）に優れるが、高負荷時にはそれがボトルネックになり得る。</p>
                <ul>
                    <li><strong>複雑なJOIN</strong>: 複数テーブルを結合する処理は、データ量が増えると急激に遅くなる。</li>
                    <li><strong>ロック競合</strong>: 更新処理が集中するテーブル（ホットスポット）で、書き込み待ちが発生する。</li>
                    <li><strong>垂直スケールへの依存</strong>: 水平分散（サーバを増やす）が苦手で、サーバのスペックアップ（垂直スケール）に頼りがちになる。</li>
                </ul>
            </div>
        </div>
        
        <!-- 受講者ワーク3 -->
        <div class="slide" id="slide-25">
            <div class="chapter">
                <h1>受講者ワーク (60秒)</h1>
                <div class="divider"></div>
                <h2>あなたのアプリの最頻クエリは？</h2>
                <p>アプリケーションで最も頻繁に実行される読み込み処理（クエリ）を3つ挙げ、それを1回の読み込みで済ませるには、どのようなデータ構造で保存すればよいか、ラフスケッチしてみてください。</p>
                <div class="teaching">
                    <p><strong>例：</strong>ブログ記事ページ</p>
                    <p>記事本体、投稿者情報、コメント一覧を別々に取得するのではなく、「記事ID」で一発で取れるJSON形式で保存しておく。</p>
                </div>
            </div>
        </div>

        <!-- Scene 6：DynamoDB -->
        <div class="slide" id="slide-26">
            <div class="chapter">
                <h1>Scene 6: DynamoDB — アクセスパターンファースト設計</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「JOIN？ そんな悠長なことはしていられん！ DynamoDB設計の神髄は<strong>アクセスパターン先出し</strong>だ。PK（パーティションキー）でデータを水平分割し、SK（ソートキー）で1対多の関係や範囲検索を表現するのだ。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「つまり、“どの画面やAPIが、どのような条件でデータを取得するか”を全て事前に洗い出し、それに最適化したテーブルを設計する。RDBの“正規化の美学”とは真逆の発想だ。」</p>
                </div>
            </div>
        </div>
        
        <!-- 幕四：最終対決へ -->
        <div class="slide" id="slide-27">
            <div class="chapter">
                <h1>物理への矜持</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「クラウドとNoSQLの圧倒的なスケーラビリティは理解しました。でも、師匠には物理サーバで培ってきた矜持もあるのでは…？」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「どっちが正義か、という話ではない。状況に応じて最適な武器を選ぶ力が、我々エンジニアには求められる。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「AWSこそが最強！異論は認めん！」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「それでも、俺は物理（オンプレミス）で生きる道を探す！」</p>
                </div>
            </div>
        </div>

        <!-- 幕四：最終対決 -->
        <div class="slide" id="slide-28">
            <div class="chapter-title">
                <h1>幕四</h1>
                <h2>最終対決<br>オンプレ vs クラウド</h2>
            </div>
        </div>
        
        <!-- Scene 7：オンプレおじさん、覚醒 -->
        <div class="slide" id="slide-29">
            <div class="chapter">
                <h1>Scene 7: オンプレおじさん、覚醒</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「俺のラックは俺の城！ 物理こそが人の心を守る！ この<strong>UPS（うなる・パワー・スピリット）</strong>で世界を支えてみせる！」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「クラウド・マテリアライズ！ マルチAZによる冗長化、自動世代バックアップ、そしてピーク時のオートスケーリング！」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「ば、馬鹿な……俺が数日かけて構築する環境を、ほんの数クリックで……！」</p>
                </div>
            </div>
        </div>
        
        <!-- ハイブリッドクラウド -->
        <div class="slide" id="slide-30">
            <div class="chapter">
                <h1>技術解説：ハイブリッドクラウドという選択</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「師匠、現実はグラデーションです。全てをどちらかに寄せる必要はありません。<br>
                    個人情報など<strong>データ主権</strong>が重要なものはオンプレ、<strong>弾力性や実験速度</strong>が欲しいものはクラウド。両者を接続し、良いとこ取りをするのが現代の最適解です。」</p>
                </div>
                <div class="teaching">
                    <h2>ハイブリッドクラウドの設計要点</h2>
                    <ul>
                        <li><strong>接続</strong>: 専用線やVPNでセキュアに接続する。</li>
                        <li><strong>ID統合</strong>: SSO等で認証基盤を統一する。</li>
                        <li><strong>監視</strong>: 共通のダッシュボードで両環境を統合的に監視する。</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 受講者ワーク4 -->
        <div class="slide" id="slide-31">
            <div class="chapter">
                <h1>受講者ワーク (60秒)</h1>
                <div class="divider"></div>
                <h2>あなたのプロダクトなら？</h2>
                <p>あなたのプロダクトやサービスにおいて、「ここはオンプレミスが有利だ」と感じる点と、「ここはクラウドが圧倒的に有利だ」と感じる点をそれぞれ1つずつ挙げてください。</p>
            </div>
        </div>

        <!-- Scene 8：課金爆死の瞬間 -->
        <div class="slide" id="slide-32">
            <div class="chapter">
                <h1>Scene 8: 課金爆死の瞬間</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「師匠！ オートスケールの設定を調整すれば、同時接続10万にも耐えられますよ！」</p>
                </div>
                <p>（サーバ監視画面のメーターが振り切れる）</p>
                <div class="code-block" style="text-align: center; font-size: 2em; color: #ff4d4d;">
                    今月の予測請求額: ¥9,999,999
                </div>
                <p style="text-align: center; font-size: 1.5em;"><strong>全員「ひぇええええええええ！！」</strong></p>
            </div>
        </div>
        
        <!-- FinOps -->
        <div class="slide" id="slide-33">
            <div class="chapter">
                <h1>技術解説：FinOps — “止める仕組み”</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「“増やす自由”には“コストを管理し、止める仕組み”が不可欠だ──これがFinOpsの考え方だ。」</p>
                </div>
                <p>FinOpsは、技術と財務が連携し、クラウドのビジネス価値を最大化するための文化であり、実践手法です。</p>
                <ul>
                    <li><strong>可視化</strong>: タグ付けを徹底し、部署やプロジェクトごとのコストを明確にする。</li>
                    <li><strong>最適化</strong>: 定期的にコストと性能（SLO）を見直し、費用対効果の悪いリソースを改善する。</li>
                    <li><strong>統制</strong>: 予算アラートを設定し、想定外の支出を自動で検知・通知する。</li>
                </ul>
            </div>
        </div>
        
        <!-- エピローグ -->
        <div class="slide" id="slide-34">
            <div class="chapter">
                <h1>エピローグ</h1>
                <div class="divider"></div>
                <div class="highlight dialogue">
                    <div class="name">俺</div>
                    <p>「……認めよう。システムを“止めない”ための最善策は、物理的な形ではなく、それを扱う<strong>手順と可視化</strong>の仕組みにこそ宿るのだと。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">ベゾス</div>
                    <p>「そうだ。状況に応じて最適な武器を選び、そして鍛えよ。世界は物理的な壁ではなく、優れたRunbookによって守られるのだ。」</p>
                </div>
                <div class="highlight dialogue">
                    <div class="name">弟子</div>
                    <p>「サーバもクラウドも、適材適所。それが一番大事、ということですね。」</p>
                </div>
            </div>
        </div>

        <!-- 最終スライド -->
        <div class="slide" id="slide-35">
            <div class="teaching">
                <div class="footer">
                    <h1>第4回: 俺たちはサーバとクラウドに支えられている</h1>
                    <p>© 2025 フロントエンドクラブ</p>
                    <p>本日はありがとうございました</p>
                </div>
            </div>
        </div>
    </div>

    <div class="fullscreen-icon" onclick="toggleFullScreen()">⛶</div>
    <div class="slide-number" id="slide-counter">1 / 35</div>
    <div class="nav-buttons">
        <button id="prev-btn" onclick="prevSlide()" disabled>前へ</button>
        <button id="next-btn" onclick="nextSlide()">次へ</button>
    </div>

    <script>
        let currentSlide = 1;
        const totalSlides = 35;
        
        function updateSlideCounter() {
            document.getElementById('slide-counter').textContent = `${currentSlide} / ${totalSlides}`;
        }
        
        function updateButtonState() {
            document.getElementById('prev-btn').disabled = currentSlide === 1;
            document.getElementById('next-btn').disabled = currentSlide === totalSlides;
        }
        
        function showSlide(slideNumber) {
            document.querySelectorAll('.slide').forEach(slide => {
                slide.classList.remove('active');
                slide.classList.remove('prev');
            });
            
            const currentSlideElem = document.getElementById(`slide-${slideNumber}`);
            if (currentSlideElem) {
                currentSlideElem.classList.add('active');
            }
            
            if (slideNumber > 1) {
                const prevSlideElem = document.getElementById(`slide-${slideNumber - 1}`);
                if (prevSlideElem) {
                    prevSlideElem.classList.add('prev');
                }
            }
            
            updateSlideCounter();
            updateButtonState();
        }
        
        function nextSlide() {
            if (currentSlide < totalSlides) {
                currentSlide++;
                showSlide(currentSlide);
            }
        }
        
        function prevSlide() {
            if (currentSlide > 1) {
                currentSlide--;
                showSlide(currentSlide);
            }
        }
        
        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Error attempting to enable full-screen mode: ${err.message}`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                prevSlide();
            } else if (e.key === 'f') {
                toggleFullScreen();
            }
        });
        
        // 初期表示
        showSlide(currentSlide);
    </script>
</body>
</html>
